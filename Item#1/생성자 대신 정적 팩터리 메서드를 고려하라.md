# 생성자 대신 정적 팩터리 메서드를 고려하라.
클라이언트가 클래스의 인스턴스를 얻는 전통적인 수단은 public 생성자다.

클래스는 생성자와 별도로 정적 팩토리 메소드(static factory method)를 제공할 수 있다.

``` java
public static Boolean valueOf(boolean b) {
    return b ? Boolean.TRUE : Boolean.FALSE;
}
```
이 메서드는 기본 타입인 boolean 값을 받아 Boolean 객체 참조로 변환해준다.

> ## 정적 팩토리 메소드란?
>> GoF 디자인 패턴 중 팩토리 패턴에서 유래한 이 단어는 객체를 생성하는 역할을 분리하겠다는 취지가 담겨있다.
>> 다시 말해, 정적 팩토리 메소드란 **객체 생성의 역할을 하는 클래스 메소드**라는 의미로 요약해볼 수 있다.

다음 코드는 java.time 패키지에 포함된 LocalTime 클래스의 정적 팩토리 메소드이다.
```java
// LocalTime.class
...
public static LocalTime of(int hour, int minute) {
  ChronoField.HOUR_OF_DAY.checkValidValue((long)hour);
  if (minute == 0) {
    return HOURS[hour];
  } else {
    ChronoField.MINUTE_OF_HOUR.checkValidValue((long)minute);
    return new LocalTime(hour, minute, 0, 0);
  }
}
...

// hour, minutes을 인자로 받아서 9시 30분을 의미하는 LocalTime 객체를 반환한다.
LocalTime openTime = LocalTime.of(9, 30);
```
위 예시 코드에서 본 LocalTime 클래스의 of 메소드처럼 직접적으로 생성자를 통해 객체를 생성하는 것이 아닌 메소드를 통해서 객체를 생성하는 것을 정적 팩토리 메소드라고 한다.

enum의 요소를 조회할 때 사용하는 valueOf도 정적 팩토리 메소드의 일종이라고 할 수 있다.

## 정적 팩터리 메서드가 생성자보다 좋은 장점 5가지
### 1. 이름을 가질 수 있다.
생성자에 넘기는 매개변수와 생성자 자체만으로는 반환될 객체의 특성을 제대로 설명하지 못한다.

반면 정적 팩터리 메서드는 이름만 잘 지으면 반환될 객체의 특성을 쉽게 묘사할 수 있다.

```java
// 생성자를 사용하는 경우
public class Foo {
	public Foo(String name) { ... }
	public Foo(String address) { ... } // 컴파일 에러
}

// 팩토리 메소드를 사용하는 경우
public class Foo {
	public Foo() { ... }
	public static withName(String name) { 
		Foo foo = new Foo();
		foo.name = name;
		return foo;
	}
	public static withAddress(String address) { 
		Foo foo = new Foo();
		foo.address = address;
		return foo;
	} 
}
```
하나의 시그니처로는 생성자를 하나만 만들 수 있다.

일므을 가질 수 있는 정적 팩터리 메서드는 이런 제약이 없다. 

한 클래스에 시그니처가 같은 생성자가 여러 개 필요할 것 같으면, 생성자를 정적 팩터리 메서드로 바꾸고 각각의 차이를 잘 드러내는 이름을 지어주면된다.

### 2. 호출될 때마다 인스턴스를 새로 생성하지 않아도 된다.
이 덕분에 불변 클래스는 인스턴스를 미리 만들어 놓거나 새로 생성한 인스턴스를 캐싱하여 재활용하는 식으로 불필요한 객체 생성을 피할 수 있다. 

#### 불변 클래스 (Immutable) 
* 변경이 불가능한 클래스
* 레퍼런스 타입의 객체 (heap 영역에서 생성)
* Thread-safe (재할당은 가능. 값 복사X)
  * Ex)String, Boolean, Integer, Float, Long <-> (StringBuilder는 가변 클래스)

대표적인 예인 Boolean.valueOf(boolean) 메서드는 객체를 아예 생성하지 않는다. 따라서 반복되는 객체 요청에 효과적이다.

```java
public class Foo {
	private static final Foo GOOD_NIGHT = new Foo();
	public Foo() { ... }
	public static getInstance() { 
		return GOOD_NIGHT;
	} 

	public static void main(String[] args) {
		Foo foo = Foo.getInstance();
	}
}
```
플라이 웨이트 패턴 설명 아래
링크: https://velog.io/@hoit_98/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4-Flyweight-%ED%8C%A8%ED%84%B4
링크: https://lee1535.tistory.com/106

반복되는 요청에 같은 객체를 반환하는 식으로 정적 팩터리 방식의 클래스는 언제 어느 인스턴스를 살아 있게 할지를 철저히 통제할 수 있다.

이런 클래스를 인스턴스 통제(instance-controlled)클래스라 한다.
