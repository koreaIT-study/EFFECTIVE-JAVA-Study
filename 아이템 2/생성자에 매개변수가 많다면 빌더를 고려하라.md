# 정적 팩터리와 생성자에 선택적 매개변수가 많을 때 고려할 수 있는 방안
## 대안 1. 생성자 체이닝 또는 점층적 생성자 패턴  
``` java
package com.example.demo.chaper01.item02;

public class NutritionFacts {
	private final int servingSize; // 필수
	private final int servings;  // 필수
	private final int calories;
	private final int fat;
	private final int sodium;
	private final int carbohydrate;

	public NutritionFacts(int servingSize, int servings) {
		this(servingSize, servings, 0);
	}

	public NutritionFacts(int servingSize, int servings, int calories) {
		this(servingSize, servings, calories, 0);
	}

	public NutritionFacts(int servingSize, int servings, int calories, int fat) {
		this(servingSize, servings, calories, fat, 0);
	}

	public NutritionFacts(int servingSize, int servings, int calories, int fat, int sodium) {
		this(servingSize, servings, calories, fat, sodium, 0);
	}

	public NutritionFacts(int servingSize, int servings, int calories, int fat, int sodium, int carbohydrate) {
		super();
		this.servingSize = servingSize;
		this.servings = servings;
		this.calories = calories;
		this.fat = fat;
		this.sodium = sodium;
		this.carbohydrate = carbohydrate;
	}
}
```  

#### 위 패턴의 문제점은 코드를 작성하기나 읽기 어렵다.  

## 대안 2. 자바 빈즈 패턴
``` java
// 기본값이 있다면 기본값으로 초기화된다.
public class NutritionFacts {
	private int servingSize = -1;
	private int servings = -1;
	private int calories;
	private int fat;
	private int sodium;
	private int carbohydrate;
	
	public int getServingSize() {
		return servingSize;
	}
	public void setServingSize(int servingSize) {
		this.servingSize = servingSize;
	}
	public int getServings() {
		return servings;
	}
	public void setServings(int servings) {
		this.servings = servings;
	}
	public int getCalories() {
		return calories;
	}
	public void setCalories(int calories) {
		this.calories = calories;
	}
	public int getFat() {
		return fat;
	}
	public void setFat(int fat) {
		this.fat = fat;
	}
	public int getSodium() {
		return sodium;
	}
	public void setSodium(int sodium) {
		this.sodium = sodium;
	}
	public int getCarbohydrate() {
		return carbohydrate;
	}
	public void setCarbohydrate(int carbohydrate) {
		this.carbohydrate = carbohydrate;
	}
}

public static void main(String[] args) {
		NutritionFacts facts = new NutritionFacts();
		facts.setServings(240);
	}
```  

장점 : 객체 생성이 간단해진다.  
단점 : 
1. 필수적으로 필요로 하는 필수값들이 세팅이 안된상태로 그냥 사용이 될 수 있다. (일관성이 무너진 상태가 될 수 있다.)  
2. 어디까지 setting을 해주어야 하는지 문서화가 필요하다.  
3. 불변 객체로 만들 수 없다.

## 대안 3. 빌더 패턴
두 가지 방법을 혼용해서 필수적인 필드들은 생성자로 넘겨받도록 강제성을 주고, Optional한 필드들은 setter로 설정을 하도록한다.  
이 방법도 여전히 하나의 단점이 있는데, 불변 객체로(immutable) 만들기 어렵다.  

불변객체로 만들려면 setter를 사용하지 말아야한다.  
왜? 객체의 일관성이 깨지기 때문에 => freezing이라는 기술도 사용할 수 있지만, 실전에서는 거의 쓰이지 않음.  








